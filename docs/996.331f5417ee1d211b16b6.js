"use strict";(self.webpackChunkmastermind=self.webpackChunkmastermind||[]).push([[996],{996:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var n=r(34),o=r(293);const s={parser:function(e,t,r){const n=JSON.parse(e),o=n[n.method];return n.method===t&&r(o),o},toObjJson:function(e,t){const r={method:t};return r[t]=e,JSON.stringify(r)}};const c=function(e){return{player:t=>{e.testSecret(t)},sendSecret:t=>{e.tellSecret(t)},sendAnswer:t=>{e.takeResp(t)}}};var a=r(363);function h(e,t,r,h){return new Promise(((i,l)=>{const u=(0,n.Z)(r),d=r.color,m=r.sh||e.location.href;u.on("socket_open",(()=>{const r=e.location.search,n=new URLSearchParams(r),s=new URL(m);s.search=n,s.searchParams.delete("wh"),s.searchParams.delete("sh"),s.searchParams.set("color",u.getOtherColor(d)),s.searchParams.set("currentMode","net");const c=(0,o.Z)(s.toString(),t.querySelector(".qrcode"));u.on("socket_close",(()=>{(0,a.ew)(c)}))}));try{u.connect(e.location.hostname)}catch(e){l(e)}u.on("open",(()=>{const n=h(e,t,r),o=c(n);u.on("recv",(e=>{for(const[t,r]of Object.entries(o))s.parser(e,t,r)}));for(const[e,t]of Object.entries(o))n.on(e,(t=>u.sendMessage(s.toObjJson(t,e))));i(n)}))}))}}}]);