"use strict";(self.webpackChunkmastermind=self.webpackChunkmastermind||[]).push([[996],{996:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(34),s=n(293);const o={parser:function(e,t,n){const r=JSON.parse(e),s=r[r.method];return r.method===t&&n(s),s},toObjJson:function(e,t){const n={method:t};return n[t]=e,JSON.stringify(n)}};const c=function(e){return{player:async t=>e.testSecret(t),sendSecret:async t=>e.tellSecret(t),sendAnswer:async t=>e.takeResp(t)}};var a=n(363);function h(e,t,n,h){return new Promise(((l,i)=>{const m=(0,r.Z)(n,e.location),u=n.color,d=n.sh||e.location.href,f=t.getElementsByClassName("log")[0];m.on("error",(e=>{(0,a.cM)(n,e,f)})),m.on("socket_open",(()=>{const n=e.location.search,r=new URLSearchParams(n),o=new URL(d);o.search=r,o.searchParams.delete("wh"),o.searchParams.delete("sh"),o.searchParams.set("color",m.getOtherColor(u)),o.searchParams.set("currentMode","net");const c=(0,s.Z)(o.toString(),t.querySelector(".qrcode"));m.on("socket_close",(()=>{(0,a.ew)(c)}))})),m.on("open",(()=>{const r=h(e,t,n),s=c(r);m.on("recv",(e=>{for(const[t,n]of Object.entries(s))o.parser(e,t,n)}));for(const[e,t]of Object.entries(s))r.on(e,(t=>m.sendMessage(o.toObjJson(t,e))));l(r)}));try{m.connect()}catch(e){(0,a.cM)(n,e,f),i(e)}}))}}}]);