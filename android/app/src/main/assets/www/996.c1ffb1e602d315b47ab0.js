"use strict";(self.webpackChunkmastermind=self.webpackChunkmastermind||[]).push([[996],{996:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var s=n(34),r=n(293);const o={parser:function(e,t,n){const s=JSON.parse(e),r=s[s.method];return s.method===t&&n(r),r},toObjJson:function(e,t){const n={method:t};return n[t]=e,JSON.stringify(n)}};const c=function(e){return{player:async t=>e.testSecret(t),sendSecret:async t=>e.tellSecret(t),sendAnswer:async t=>e.takeResp(t)}};var a=n(363);function h(e,t,n,h){return new Promise(((i,l)=>{const u=(0,s.Z)(n),d=n.color,m=n.sh||e.location.href;u.on("socket_open",(()=>{const n=e.location.search,s=new URLSearchParams(n),o=new URL(m);o.search=s,o.searchParams.delete("wh"),o.searchParams.delete("sh"),o.searchParams.set("color",u.getOtherColor(d)),o.searchParams.set("currentMode","net");const c=(0,r.Z)(o.toString(),t.querySelector(".qrcode"));u.on("socket_close",(()=>{(0,a.ew)(c)}))}));try{u.connect(e.location.hostname)}catch(e){l(e)}u.on("open",(()=>{const s=h(e,t,n),r=c(s);u.on("recv",(e=>{for(const[t,n]of Object.entries(r))o.parser(e,t,n)}));for(const[e,t]of Object.entries(r))s.on(e,(t=>u.sendMessage(o.toObjJson(t,e))));i(s)}))}))}}}]);